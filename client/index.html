<!DOCTYPE html>
<html>
  <head>

  	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>



    <style>

       html, body {
       	width:100vw;
       	height:100vh;
        background-color: #D6E7AB
       }
       #map {
        height: 80vh;
        width: 100%;
       }
       h3 {
        color:white;
        display: block;
        font-family: 'Source Sans Pro', sans-serif;
	      letter-spacing: 5px;
	      text-align: left;
	      font-size: 3em;
	      text-transform: uppercase;
	      font-weight: 700;
}


    </style>
  </head>
  <body>

  	<div class="container">
  		<h3 class="center">What happens near me?</h3>
        <div class="row">
	      <div class="col s8">
	      	<div id="map"></div>
	      </div>
	      <div class="col s4">

	      	<button type="button" class="btn btn-default" onclick="submitToserver()">Default</button>
	      	 <!-- Switch -->
			    <label> Health!</label>
				  <div class="switch">
				    <label>
				      Off
				      <input type="checkbox">
				      <span class="lever"></span>
				      On
				    </label>
				  </div>
	      </div>
	    </div>
     </div>








    <script>
      var map;
      var features = [];

      // This example requires the Drawing library. Include the libraries=drawing
      // parameter when you first load the API. For example:
      // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=drawing">

      function getLatLngs() {
      	const arr = [];
      	for (i in features) {
      		const lat = features[i].position.lat()
      		const lng = features[i].position.lng()
      		arr.push([lat,lng])
      	}
      	return arr;
      }

      function submitToserver() {
      	latlngs = getLatLngs()
      	console.log(latlngs)
      	// API REQUEST HERE
      }


      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 60.9, lng: 18.0},
          zoom: 5
        });

        var drawingManager = new google.maps.drawing.DrawingManager({
          drawingMode: google.maps.drawing.OverlayType.MARKER,
          drawingControl: true,
          drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: ['marker',] // 'circle', 'polygon', 'polyline', 'rectangle'
          },
          markerOptions: {
          	clickable: true,
          	draggable: true
          },
        });
        drawingManager.setMap(map);

        google.maps.event.addListener(drawingManager, 'markercomplete', function (marker) {
	        console.log('Added a marker!')
	        features.push(marker)
	    });



      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQ0bV8tstmI9u3ZxfswjQPGYSWDE8y0mY&libraries=drawing&callback=initMap">
    </script>
  </body>
</html>